{{header-component
  doNews="doNews"
  doDocs="doDocs"
  sendToPi="sendToPi"
  saveProject="saveProject"
  doSavedProjects="doSavedProjects"
  doLogIn="doLogIn"
  doLogOut="doLogOut"
  serialMonitor="serialMonitor"
  selectBlocksMode="selectBlocksMode"
  selectSketchMode="selectSketchMode"
  newBlockProject="newBlockProject"
  doShowDownloadModal="doShowDownloadModal"
  onPi=model.onPi.onPi
  editor=indexController.editor
  session=session
  project=model.project
  electronAppInstalled=electronAppInstalled
  chromeAppInstalled=chromeAppInstalled
}}

{{outlet}}

{{#if showSaveProjectModal}}
  <div id="saveProjectModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title text-center">{{t "common.header.save"}}</h4>
        </div>
        <div class="modal-body">
          <div>{{t "common.index.projectName"}}</div>
          <div class="text-center" style="margin-top: 20px;">
            <div>
              {{input type="text" value=model.project.name}}
              {{#if projectSaving}}
                <i class="fa fa-spinner fa-spin"></i>
              {{/if}}
              {{#if projectSaveSuccess}}
                <span class="label label-success"><i class="fa fa-check"></i> {{t "common.header.saved"}}</span>
              {{/if}}
              {{#if projectSaveFailed}}
                <span class="label label-danger"><i class="fa fa-times"></i> {{t "common.header.notSaved"}}</span>
              {{/if}}
            </div>
            <div>
              <button class="btn btn-primary" style="margin-top: 20px;" {{action "doSaveProject"}}>{{t "common.header.save"}}</button>
              <button class="btn btn-primary" style="margin-top: 20px;" {{action "doRemixProject"}}>{{t "common.index.saveRemix"}}
              </button>
            </div>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" {{action "hideSaveProject"}}>{{t "common.done"}}</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div><!-- /.modal -->
{{/if}}

{{#if showUploadToArduinoModal}}
  <div id="uploadProjectModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title text-center">{{t "common.index.uploadProject"}}</h4>
        </div>
        <div class="modal-body">
          {{t "common.index.arduinoSelect"}}
          <select onchange={{action (mut selectedArduino) value="target.value"}}>
            <option value="uno">Arduino Uno</option>
            <option value="nanoatmega328">Arduino Nano 328</option>
            <option value="bbcmicrobit">BBC micro:bit (beta)</option>
          </select>

          <button class="btn btn-info pull-right" {{action "doUploadToArduino"}}>{{t "common.index.startUpload"}}</button>

          {{#if uploadStarted}}
            <table class="table">
              <tbody>

              {{#if compileStatus}}
                <tr>
                  <td>
                    {{#if compileError}}
                      {{fa-icon "close" size=2 border=false style="color: red;"}}
                    {{else}}
                      {{fa-icon "check" size=2 border=false style="color: green;"}}
                    {{/if}}
                    {{t "common.index.compileStatus"}}
                  </td>
                  <td>{{compileStatus}}</td>
                </tr>
              {{/if}}

              {{#if uploadResponseMessage}}
                <tr>
                  <td colspan="2">{{t "common.index.compileLog"}}<br/>
                    {{textarea value=uploadResponseMessage classNames="loggArea"}}</td>
                </tr>
              {{/if}}


              {{#if uploadError}}
                <tr>
                  <td>
                    {{#if uploadErrorStatus}}
                      {{fa-icon "close" size=2 border=false style="color: red;"}}
                    {{else}}
                      {{fa-icon "check" size=2 border=false style="color: green;"}}
                    {{/if}}
                    {{t "statusUpload"}}

                  </td>
                  <td>{{uploadError}}</td>
                </tr>
              {{/if}}

              {{#if uploadUsbPort}}
                <tr>
                  <td>{{t "common.index.usbPort"}}</td>
                  <td>{{uploadUsbPort}}</td>
                </tr>
              {{/if}}

              </tbody>
            </table>
          {{/if}}

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" {{action "closeUploadPanel"}}>{{t "common.done"}}</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div><!-- /.modal -->
{{/if}}

{{#if showSerialMonitorModal}}
  <div id="serialMonitorModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title text-center">{{t "common.index.serialMonitor"}}</h4>
        </div>
        <div class="modal-body">
          {{#if serialStarted}}
            <table class="table">
              <tr>
                <td>Port:</td>
                <td>
                  <select onchange={{action (mut selectedSerialPort) value="target.value"}}>
                    <option value="-1">{{t "common.index.portChoose"}}</option>
                    {{#each serialPortsAvailable as |sp|}}
                      <option value={{sp.comName}} selected={{eq sp selectedSerialPort}}>{{sp.comName}}
                        - {{sp.manufacturer}}</option>
                    {{/each}}
                  </select>
                </td>
                <td>
                  <button class="btn btn-primary" {{action "openSerialMonitor"}}>{{t "common.index.startSerial"}}</button>
                </td>
              </tr>
            </table>

            <div>{{textarea id="serialMonitorOutput" value=serialDataRead classNames="loggArea"}}</div>
          {{/if}}

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" {{action "hideSerialMonitor"}}>{{t "common.done"}}</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div><!-- /.modal -->
{{/if}}

{{#if showDownloadModal}}
  <div id="downloadModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title text-center">{{t "common.divs.installProgram"}}</h4>
        </div>
        <div class="modal-body">
          <div>
            {{t "common.divs.installAddProgram"}}
          </div>

          <div class="clearfix">&nbsp;</div>

          <div>
            {{t "common.divs.installedAddProgram"}}
          </div>
          <h1>{{t "common.index.forChromebook"}}</h1>
          <div>
            {{t "common.index.blockuinoHex"}} <a
            href="https://chrome.google.com/webstore/detail/blockuino-hex-uploader-av/ekbpmcpbckbdpbjhdchoniihflnmabie"
            target="_blank">https://chrome.google.com/webstore/detail/blockuino-hex-uploader-av/ekbpmcpbckbdpbjhdchoniihflnmabie</a>.
          </div>

          <h1>{{t "common.index.forWindows"}}</h1>
          <div>
            {{t "common.index.blockuinoElectron"}} <a
            href="http://blockuino.no/downloads/BlockuinoElectronInstaller.exe" target="_blank">http://blockuino.no/downloads/BlockuinoElectronInstaller.exe</a>.
          </div>

          <h1>For Mac:</h1>
          <div>
            {{t "common.index.blockuinoElectronIOS"}} <a href="http://blockuino.no/downloads/blockuino-electron-app.dmg"
                                                        target="_blank">http://blockuino.no/downloads/blockuino-electron-app.dmg</a>.
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" {{action "hideDownloadModal"}}>{{t "common.done"}}</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div><!-- /.modal -->
{{/if}}